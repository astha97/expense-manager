{"ast":null,"code":"import _regeneratorRuntime from \"/home/astha/Desktop/Final Version/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/astha/Desktop/Final Version/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/astha/Desktop/Final Version/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/astha/Desktop/Final Version/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/astha/Desktop/Final Version/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/astha/Desktop/Final Version/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/astha/Desktop/Final Version/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/astha/Desktop/Final Version/client/src/App.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Modal from 'react-awesome-modal';\nimport axios from 'axios';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      expenses: [],\n      total: 0,\n      modal: false,\n      addModal: false,\n      newTitle: '',\n      newAuthor: '',\n      newCOST: '',\n      editTitle: '',\n      editAuthor: '',\n      editCOST: '',\n      editID: '',\n      dataLoading: false\n    };\n\n    _this.logout = function () {\n      localStorage.removeItem('jwtToken');\n      window.location.reload();\n    };\n\n    _this.createExpense = function (event) {\n      event.preventDefault();\n      var expensedata = {\n        title: _this.state.newTitle,\n        author: _this.state.newAuthor,\n        cost: _this.state.newCOST\n      };\n      axios.post('http://localhost:5000/api/expense', expensedata);\n\n      _this.fetchAllExpenses();\n\n      _this.setState({\n        newTitle: '',\n        newAuthor: '',\n        newCOST: ''\n      });\n\n      _this.closeAddModal();\n\n      _this.fetchAllExpenses();\n    };\n\n    _this.updateExpense = function (event) {\n      event.preventDefault();\n      var expenseData = {\n        title: _this.state.editTitle,\n        author: _this.state.editAuthor,\n        cost: _this.state.editCOST,\n        id: _this.state.editID\n      };\n      axios.put('http://localhost:5000/api/expense', expenseData);\n\n      _this.closeModal();\n\n      _this.setState({\n        editTitle: '',\n        editAuthor: '',\n        editCOST: ''\n      });\n\n      _this.fetchAllExpenses();\n    };\n\n    _this.deleteExpense =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(id) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log({\n                  id: id\n                });\n                console.log('Delete clicked');\n                _context.next = 4;\n                return axios.delete('http://localhost:5000/api/expense/', {\n                  data: {\n                    id: id\n                  }\n                });\n\n              case 4:\n                _this.fetchAllExpenses();\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleTitleChange = function (event) {\n      _this.setState({\n        newTitle: event.target.value\n      });\n    };\n\n    _this.handleAuthorChange = function (event) {\n      _this.setState({\n        newAuthor: event.target.value\n      });\n    };\n\n    _this.handleCOSTChange = function (event) {\n      _this.setState({\n        newCOST: event.target.value\n      });\n    };\n\n    _this.handleEditTitleChange = function (event) {\n      _this.setState({\n        editTitle: event.target.value\n      });\n    };\n\n    _this.handleEditAuthorChange = function (event) {\n      _this.setState({\n        editAuthor: event.target.value\n      });\n    };\n\n    _this.handleEditCOSTChange = function (event) {\n      _this.setState({\n        editCOST: event.target.value\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchAllExpenses();\n    }\n  }, {\n    key: \"renderExpensesList\",\n    value: function renderExpensesList() {\n      var _this2 = this;\n\n      console.log(this.state.total);\n      return this.state.expenses.map(function (items) {\n        return React.createElement(React.Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 31\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          key: items._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 33\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"/show/\".concat(items._id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 33\n          },\n          __self: this\n        }, items.cost)), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 34\n          },\n          __self: this\n        }, items.title), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 35\n          },\n          __self: this\n        }, items.author), React.createElement(\"td\", {\n          style: {\n            width: \"175px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"btn btn-info\",\n          onClick: function onClick() {\n            return _this2.openModal(items._id, items.cost, items.title, items.author);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36\n          },\n          __self: this\n        }, \"EDIT\"), \" \", React.createElement(\"button\", {\n          className: \"btn btn-danger\",\n          onClick: function onClick() {\n            return _this2.deleteExpense(items._id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36\n          },\n          __self: this\n        }, \"DELETE\"))));\n      });\n    }\n  }, {\n    key: \"openModal\",\n    value: function openModal(id, cost, title, author) {\n      console.log('Open Modal');\n      this.setState({\n        modal: true,\n        editID: id,\n        editTitle: title,\n        editAuthor: author,\n        editCOST: cost\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      console.log('Close Modal');\n      this.setState({\n        modal: false\n      });\n    }\n  }, {\n    key: \"openAddModal\",\n    value: function openAddModal(id, cost, title, author) {\n      console.log('Open Modal');\n      this.setState({\n        addModal: true\n      });\n    }\n  }, {\n    key: \"closeAddModal\",\n    value: function closeAddModal() {\n      console.log('Close Modal');\n      this.setState({\n        addModal: false\n      });\n    }\n  }, {\n    key: \"fetchAllExpenses\",\n    value: function fetchAllExpenses() {\n      var _this3 = this;\n\n      axios.defaults.headers.common['Authorization'] = localStorage.getItem('jwtToken');\n      axios.get('http://localhost:5000/api/expense').then(function (res) {\n        _this3.setState({\n          expenses: res.data\n        }, function () {\n          _this3.sumCost(_this3.state.expenses);\n        });\n\n        console.log(_this3.state.expenses);\n      }).catch(function (error) {\n        if (error.response.status === 401) {\n          _this3.props.history.push(\"/login\");\n        }\n      });\n    }\n  }, {\n    key: \"sumCost\",\n    value: function sumCost(data) {\n      console.log('here');\n      var sum = 0;\n      var total = data.map(function (items) {\n        console.log(typeof items.cost);\n        sum += items.cost;\n      });\n      console.log(sum);\n      this.setState({\n        total: sum,\n        dataLoading: true\n      });\n      console.log(this.state.total);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var dataLoading = this.state.dataLoading;\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(Modal, {\n        visible: this.state.modal,\n        width: \"550\",\n        height: \"375\",\n        effect: \"fadeInUp\",\n        onClickAway: function onClickAway() {\n          return _this4.closeModal();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, \"Edit Expense\"), React.createElement(\"form\", {\n        onSubmit: this.updateExpense,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"Title:\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        class: \"form-control\",\n        type: \"text\",\n        onChange: this.handleEditTitleChange,\n        name: \"title\",\n        value: this.state.editTitle,\n        placeholder: \"Walt Disney Collection\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }), \"Author:\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        class: \"form-control\",\n        onChange: this.handleEditAuthorChange,\n        name: \"author\",\n        value: this.state.editAuthor,\n        placeholder: \"Mickey Mouse\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }), \"COST:\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        class: \"form-control\",\n        onChange: this.handleEditCOSTChange,\n        name: \"author\",\n        value: this.state.editCOST,\n        placeholder: \"573058653\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"btn btn-info\",\n        type: \"submit\",\n        value: \"Update Expense\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-danger float-right\",\n        onClick: function onClick() {\n          return _this4.closeModal();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, \"Close\"))))), React.createElement(Modal, {\n        visible: this.state.addModal,\n        width: \"550\",\n        height: \"375\",\n        effect: \"fadeInUp\",\n        onClickAway: function onClickAway() {\n          return _this4.closeAddModal();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, \"Add Expense\"), React.createElement(\"form\", {\n        onSubmit: this.createExpense,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, \"Title:\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        class: \"form-control\",\n        onChange: this.handleTitleChange,\n        name: \"title\",\n        value: this.state.newTitle,\n        placeholder: \"Walt Disney Collection\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }), \"Author:\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        class: \"form-control\",\n        onChange: this.handleAuthorChange,\n        name: \"author\",\n        value: this.state.newAuthor,\n        placeholder: \"Mickey Mouse\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }), \"COST:\", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"text\",\n        class: \"form-control\",\n        onChange: this.handleCOSTChange,\n        name: \"author\",\n        value: this.state.newCOST,\n        placeholder: \"573058653\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        className: \"btn btn-success\",\n        type: \"submit\",\n        value: \"Create Expense\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"panel panel-default\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"mb-5 panel-heading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"panel-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"Expense Catalog \\xA0\", localStorage.getItem('jwtToken') && React.createElement(\"button\", {\n        className: \"btn btn-primary float-right\",\n        onClick: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, \"Logout\"), React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this4.openAddModal();\n        },\n        className: \"btn btn-success float-right mr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, \"Add Expense\"))), React.createElement(\"div\", {\n        className: \"panel-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        className: \"table table-stripe\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, \"COST\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"Title\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \"Author\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, \"Actions\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, dataLoading && this.renderExpensesList())))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/home/astha/Desktop/Final Version/client/src/App.js"],"names":["React","Component","Link","Modal","axios","App","state","expenses","total","modal","addModal","newTitle","newAuthor","newCOST","editTitle","editAuthor","editCOST","editID","dataLoading","logout","localStorage","removeItem","window","location","reload","createExpense","event","preventDefault","expensedata","title","author","cost","post","fetchAllExpenses","setState","closeAddModal","updateExpense","expenseData","id","put","closeModal","deleteExpense","console","log","delete","data","handleTitleChange","target","value","handleAuthorChange","handleCOSTChange","handleEditTitleChange","handleEditAuthorChange","handleEditCOSTChange","map","items","_id","width","openModal","defaults","headers","common","getItem","get","then","res","sumCost","catch","error","response","status","props","history","push","sum","openAddModal","renderExpensesList"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Modal from 'react-awesome-modal';\nimport axios from 'axios';\n\nclass App extends Component {\n\n  state = {\n    expenses: [],\n    total: 0,\n    modal: false,\n    addModal: false,\n    newTitle: '',\n    newAuthor: '',\n    newCOST: '',\n    editTitle: '',\n    editAuthor: '',\n    editCOST: '',\n    editID: '',\n    dataLoading: false\n  };\n\n  componentDidMount() {\n    this.fetchAllExpenses()\n  }\n\n  renderExpensesList() {\n    console.log(this.state.total)\n    return this.state.expenses.map(items => {\n      return (\n        <React.Fragment>\n          <tr key={items._id}>\n            <td><Link to={`/show/${items._id}`}>{items.cost}</Link></td>\n            <td>{items.title}</td>\n            <td>{items.author}</td>\n            <td style={{width:\"175px\"}}><button className=\"btn btn-info\" onClick={() => this.openModal(items._id, items.cost, items.title, items.author)} >EDIT</button> <button className=\"btn btn-danger\" onClick={() => this.deleteExpense(items._id)}>DELETE</button></td>\n          </tr>\n        </React.Fragment>\n      )\n    })\n  }\n\n  openModal(id, cost, title, author) {\n    console.log('Open Modal')\n    this.setState({\n      modal : true,\n      editID: id,\n      editTitle: title,\n      editAuthor: author,\n      editCOST: cost\n    });\n\n  }\n\n  closeModal() {\n    console.log('Close Modal')\n    this.setState({\n      modal : false\n    });\n  }\n\n  openAddModal(id, cost, title, author) {\n    console.log('Open Modal')\n    this.setState({\n      addModal : true\n    });\n\n  }\n\n  closeAddModal() {\n    console.log('Close Modal')\n    this.setState({\n      addModal : false\n    });\n  }\n\n\n  fetchAllExpenses() {\n    axios.defaults.headers.common['Authorization'] = localStorage.getItem('jwtToken');\n    axios.get('http://localhost:5000/api/expense')\n      .then(res => {\n        this.setState({ expenses: res.data }, () => {\n          this.sumCost(this.state.expenses)\n        });\n        console.log(this.state.expenses);\n      })\n      .catch((error) => {\n        if(error.response.status === 401) {\n          this.props.history.push(\"/login\");\n        }\n      });\n  }\n\n  sumCost(data) {\n    console.log('here')\n    let sum = 0;\n    let total = data.map(items => {\n      console.log( typeof items.cost)\n      sum += items.cost;\n    })\n    console.log(sum)\n    this.setState({\n      total: sum,\n      dataLoading: true\n    })\n    console.log(this.state.total)\n  }\n\n  logout = () => {\n    localStorage.removeItem('jwtToken');\n    window.location.reload();\n  }\n\n  createExpense = (event) => {\n    event.preventDefault();\n    const expensedata = {\n      title: this.state.newTitle,\n      author: this.state.newAuthor,\n      cost: this.state.newCOST\n    }\n    axios.post('http://localhost:5000/api/expense', expensedata)\n    this.fetchAllExpenses();\n    this.setState({ newTitle: '', newAuthor: '', newCOST: '' })\n    this.closeAddModal();\n    this.fetchAllExpenses();\n  }\n\n  updateExpense = (event) => {\n    event.preventDefault();\n    const expenseData = {\n      title: this.state.editTitle,\n      author: this.state.editAuthor,\n      cost: this.state.editCOST,\n      id: this.state.editID\n    }\n    axios.put('http://localhost:5000/api/expense', expenseData)\n    this.closeModal();\n    this.setState({ editTitle: '', editAuthor: '', editCOST: '' })\n    this.fetchAllExpenses();\n  }\n\n  deleteExpense = async (id) => {\n    console.log({id})\n    console.log('Delete clicked')\n    await axios.delete('http://localhost:5000/api/expense/', { data: { id: id } })\n    this.fetchAllExpenses()\n  }\n\n  handleTitleChange = (event) => {\n    this.setState({ newTitle: event.target.value });\n  };\n\n  handleAuthorChange = (event) => {\n    this.setState({ newAuthor: event.target.value });\n  };\n\n  handleCOSTChange = (event) => {\n    this.setState({ newCOST: event.target.value });\n  };\n\n  handleEditTitleChange = (event) => {\n    this.setState({ editTitle: event.target.value });\n  };\n\n  handleEditAuthorChange = (event) => {\n    this.setState({ editAuthor: event.target.value });\n  };\n\n  handleEditCOSTChange = (event) => {\n    this.setState({ editCOST: event.target.value });\n  };\n\n  render() {\n    const { dataLoading } = this.state;\n    return (\n      <div className=\"container\">\n        <Modal \n            visible={this.state.modal}\n            width=\"550\"\n            height=\"375\"\n            effect=\"fadeInUp\"\n            onClickAway={() => this.closeModal()}\n        >\n          <div className=\"container\">\n              <h1>Edit Expense</h1>\n              <form onSubmit={this.updateExpense}>\n              Title:<br />\n              <input class=\"form-control\" type=\"text\" onChange={this.handleEditTitleChange} name=\"title\" value={this.state.editTitle} placeholder=\"Walt Disney Collection\"/>\n              <br />\n              Author:<br />\n              <input type=\"text\" class=\"form-control\" onChange={this.handleEditAuthorChange} name=\"author\" value={this.state.editAuthor} placeholder=\"Mickey Mouse\"/>\n              <br/>\n              COST:<br />\n              <input type=\"text\" class=\"form-control\" onChange={this.handleEditCOSTChange} name=\"author\" value={this.state.editCOST} placeholder=\"573058653\"/>\n              <br/>\n              <div>\n              <input className=\"btn btn-info\" type=\"submit\" value=\"Update Expense\" />\n              <button className=\"btn btn-danger float-right\" onClick={() => this.closeModal()}>Close</button>\n              </div>\n            </form> \n          </div>\n        </Modal>\n\n\n        <Modal \n            visible={this.state.addModal}\n            width=\"550\"\n            height=\"375\"\n            effect=\"fadeInUp\"\n            onClickAway={() => this.closeAddModal()}\n        >\n          <div className=\"container\">\n              <h1>Add Expense</h1>\n              <form onSubmit={this.createExpense}>\n              Title:<br />\n              <input type=\"text\" class=\"form-control\" onChange={this.handleTitleChange} name=\"title\" value={this.state.newTitle} placeholder=\"Walt Disney Collection\"/>\n              Author:<br />\n              <input type=\"text\" class=\"form-control\" onChange={this.handleAuthorChange} name=\"author\" value={this.state.newAuthor} placeholder=\"Mickey Mouse\"/>\n              COST:<br />\n              <input type=\"text\" class=\"form-control\" onChange={this.handleCOSTChange} name=\"author\" value={this.state.newCOST} placeholder=\"573058653\"/>\n              <input className=\"btn btn-success\" type=\"submit\" value=\"Create Expense\" />\n            </form> \n          </div>\n        </Modal>\n\n\n\n        <div className=\"panel panel-default\">\n          <div className=\"mb-5 panel-heading\">\n            <h3 className=\"panel-title\">\n              Expense Catalog &nbsp;\n              {localStorage.getItem('jwtToken') &&\n                <button className=\"btn btn-primary float-right\" onClick={this.logout}>Logout</button>\n              }\n              <button onClick={() => this.openAddModal()} className=\"btn btn-success float-right mr-2\">Add Expense</button>\n            </h3>\n          </div>\n          <div className=\"panel-body\">\n            <table className=\"table table-stripe\">\n              <thead>\n                <tr>\n                  <th>COST</th>\n                  <th>Title</th>\n                  <th>Author</th>\n                  <th>Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {dataLoading && this.renderExpensesList()}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}